{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": "How is the economy affecting fatalities",
    "width": 800,
    "height": 500,
    "data": {
    "url": "https://raw.githubusercontent.com/ndea0002/FIT3179-Asgn2/main/Data/1999_2003.csv"
  },
  "mark": {
      "type": "circle",
      "opacity": 0.8,
      "stroke": "black",
      "strokeWidth": 1
    },
    "transform": [
        {
          "calculate": "toNumber(datum.suicides_no)",
          "as": "suicides"
        },
        {
          "calculate": "toNumber(datum.year)",
          "as": "year_2"
        },
         {
          "calculate": "toNumber(datum.gdp_for_year)",
          "as": "gdp"
        }
    ],
  "selection": {
    "year_highlight": {
  "type": "multi",
  "fields": ["year"],
  "bind": "legend"
    }
  },  
  "encoding": {
    "x": {
      "field": "gdp",
      "type": "quantitative",
      "scale": {"type": "sqrt"},
      "title":"GDP for the year"
    },
    "y": {
      "field": "suicides",
      "type": "quantitative"
    },
  "color": {
  "field": "year",
  "type": "nominal"
  },
  "size": {
  "field": "suicides",
  "type": "quantitative"
  },
  "opacity": {
   "condition": {"selection": "year_highlight", "value": 0.8},
  "value": 0.1
  },
  "tooltip": [
  {"field": "year", "type": "nominal", "title": "Year"},
  {"field": "country",   "title" : "Country"},
  {"field": "suicides", "type": "quantitative", "format": ","},
  {"field": "gdp_for_year", "type": "quantitative", "format": ","}
  ]
  }   
  }
  